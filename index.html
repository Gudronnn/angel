<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Перукарня Angel — Запис</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    background: #fffafc;
    color: #333;
  }
  header.hero {
    background: linear-gradient(rgba(255, 200, 230, 0.8), rgba(255, 255, 255, 0.9));
    text-align: center;
    padding: 80px 20px;
  }
  .hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: 3.5rem;
    color: #d58ab3;
    margin-bottom: 10px;
  }
  .hero p {
    font-size: 1.2rem;
    color: #555;
  }
  section {
    padding: 40px 20px;
    max-width: 480px;
    margin: 0 auto;
    text-align: center;
  }
  label {
    font-weight: 600;
    display: block;
    margin-top: 15px;
    margin-bottom: 5px;
    text-align: left;
  }
  select, button {
    width: 100%;
    padding: 10px;
    font-size: 1rem;
    border-radius: 8px;
    border: 1px solid #ccc;
    box-sizing: border-box;
    outline-offset: 2px;
  }
  select:disabled {
    background: #eee;
  }
  button {
    margin-top: 25px;
    background: #d58ab3;
    color: white;
    border: none;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:disabled {
    background: #e0b9cf;
    cursor: default;
  }
  button:hover:not(:disabled) {
    background: #c078a1;
  }
  #message {
    margin-top: 20px;
    font-weight: 600;
    color: green;
  }
</style>
</head>
<body>

<header class="hero">
  <h1>Angel</h1>
  <p>Ваше волосся — наш ангельський догляд</p>
</header>

<section>
  <h2>Запис на прийом</h2>
  <form id="bookingForm" onsubmit="return false;">
    <label for="dateSelect">Виберіть дату:</label>
    <select id="dateSelect" required></select>

    <label for="timeSelect">Виберіть час:</label>
    <select id="timeSelect" required disabled></select>

    <button id="bookBtn" disabled>Записатись</button>
  </form>
  <div id="message" role="alert" aria-live="polite"></div>
</section>

<script>
  const dateSelect = document.getElementById('dateSelect');
  const timeSelect = document.getElementById('timeSelect');
  const bookBtn = document.getElementById('bookBtn');
  const message = document.getElementById('message');

  // Масив зайнятих слотів формату "YYYY-MM-DD HH:mm"
  const busySlots = [
    "2025-07-20 10:00",
    "2025-07-20 12:00",
    "2025-07-21 14:00",
    "2025-08-05 11:00",
  ];

  // Масив можливих часів (кожна година з 10:00 до 18:00)
  const availableTimes = [
    "10:00", "11:00", "12:00", "13:00",
    "14:00", "15:00", "16:00", "17:00", "18:00"
  ];

  // Заповнюємо дати на 60 днів вперед
  function populateDates() {
    const today = new Date();
    for (let i = 0; i < 60; i++) {
      const date = new Date();
      date.setDate(today.getDate() + i);
      const yyyy = date.getFullYear();
      const mm = String(date.getMonth() + 1).padStart(2, '0');
      const dd = String(date.getDate()).padStart(2, '0');
      const dateStr = `${yyyy}-${mm}-${dd}`;

      const option = document.createElement('option');
      option.value = dateStr;
      option.textContent = date.toLocaleDateString('uk-UA', {weekday: 'short', year:'numeric', month:'short', day:'numeric'});
      dateSelect.appendChild(option);
    }
  }

  // Заповнюємо часи для вибраної дати, блокуємо зайняті
  function populateTimes(selectedDate) {
    timeSelect.innerHTML = '';
    let anyAvailable = false;

    for (const time of availableTimes) {
      const slot = `${selectedDate} ${time}`;
      const option = document.createElement('option');
      option.value = time;

      if (busySlots.includes(slot)) {
        option.disabled = true;
        option.textContent = `${time} (зайнято)`;
      } else {
        option.textContent = time;
        anyAvailable = true;
      }
      timeSelect.appendChild(option);
    }

    timeSelect.disabled = !anyAvailable;
    bookBtn.disabled = !anyAvailable;
    if (!anyAvailable) {
      message.textContent = "Вибрана дата повністю зайнята. Будь ласка, оберіть іншу дату.";
    } else {
      message.textContent = "";
    }
  }

  // Слухаємо зміну дати
  dateSelect.addEventListener('change', () => {
    populateTimes(dateSelect.value);
  });

  // Слухаємо зміну часу — активуємо кнопку, якщо обрано дату і час
  timeSelect.addEventListener('change', () => {
    bookBtn.disabled = !(dateSelect.value && timeSelect.value);
  });

  // Обробка натискання кнопки запису
  bookBtn.addEventListener('click', () => {
    if (!dateSelect.value || !timeSelect.value) return;

    const bookingDate = dateSelect.options[dateSelect.selectedIndex].textContent;
    const bookingTime = timeSelect.value;

    message.style.color = 'green';
    message.textContent = `Дякуємо! Ви записані на ${bookingDate} о ${bookingTime}.`;

    // Тут можна додати збереження в localStorage чи відправку на сервер

    // Заносимо цей слот у зайняті, щоб заблокувати його (тільки на час сесії)
    busySlots.push(`${dateSelect.value} ${timeSelect.value}`);

    // Оновлюємо список часу щоб заблокувати цей слот
    populateTimes(dateSelect.value);

    // Вимикаємо кнопку поки не виберуть новий час
    bookBtn.disabled = true;
    timeSelect.value = "";
  });

  // Початкове заповнення дат і часу
  populateDates();
  populateTimes(dateSelect.value);
</script>

</body>
</html>
