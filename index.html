<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Перукарня Angel — Запис</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    background: #fffafc;
    color: #333;
  }
  header.hero {
    background: linear-gradient(rgba(255, 200, 230, 0.8), rgba(255, 255, 255, 0.9));
    text-align: center;
    padding: 80px 20px;
  }
  .hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: 3.5rem;
    color: #d58ab3;
    margin-bottom: 10px;
  }
  .hero p {
    font-size: 1.2rem;
    color: #555;
  }
  section {
    padding: 40px 20px;
    max-width: 480px;
    margin: 0 auto;
    text-align: center;
  }
  label {
    font-weight: 600;
    display: block;
    margin-top: 15px;
    margin-bottom: 5px;
    text-align: left;
  }
  select, button {
    width: 100%;
    padding: 10px;
    font-size: 1rem;
    border-radius: 8px;
    border: 1px solid #ccc;
    box-sizing: border-box;
    outline-offset: 2px;
  }
  select:disabled {
    background: #eee;
  }
  button {
    margin-top: 25px;
    background: #d58ab3;
    color: white;
    border: none;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:disabled {
    background: #e0b9cf;
    cursor: default;
  }
  button:hover:not(:disabled) {
    background: #c078a1;
  }
  #message {
    margin-top: 20px;
    font-weight: 600;
    color: green;
  }
</style>
</head>
<body>

<header class="hero">
  <h1>Angel</h1>
  <p>Ваше волосся — наш ангельський догляд</p>
</header>

<section>
  <h2>Запис на прийом</h2>
  <form id="bookingForm" novalidate>
    <label for="dateSelect">Виберіть дату:</label>
    <select id="dateSelect" required>
      <option value="" disabled selected>Оберіть дату</option>
    </select>

    <label for="timeSelect">Виберіть час:</label>
    <select id="timeSelect" required disabled>
      <option value="" disabled selected>Оберіть час</option>
    </select>

    <button type="submit" id="bookBtn" disabled>Записатись</button>
  </form>
  <div id="message" role="alert" aria-live="polite"></div>
</section>

<script>
  const dateSelect = document.getElementById('dateSelect');
  const timeSelect = document.getElementById('timeSelect');
  const bookBtn = document.getElementById('bookBtn');
  const message = document.getElementById('message');
  const bookingForm = document.getElementById('bookingForm');

  // Масив зайнятих слотів формату "YYYY-MM-DD HH:mm"
  const busySlots = [
    "2025-07-20 10:00",
    "2025-07-20 12:00",
    "2025-07-21 14:00",
    "2025-08-05 11:00",
  ];

  // Можливі часи для запису (10:00 - 18:00)
  const availableTimes = [
    "10:00", "11:00", "12:00", "13:00",
    "14:00", "15:00", "16:00", "17:00", "18:00"
  ];

  function populateDates() {
    const today = new Date();
    for(let i = 0; i < 60; i++) {
      const date = new Date(today);
      date.setDate(today.getDate() + i);
      const yyyy = date.getFullYear();
      const mm = String(date.getMonth() + 1).padStart(2,'0');
      const dd = String(date.getDate()).padStart(2,'0');
      const dateStr = `${yyyy}-${mm}-${dd}`;

      const option = document.createElement('option');
      option.value = dateStr;
      option.textContent = date.toLocaleDateString('uk-UA', {weekday:'short', year:'numeric', month:'short', day:'numeric'});
      dateSelect.appendChild(option);
    }
  }

  function populateTimes(selectedDate) {
    timeSelect.innerHTML = '<option value="" disabled selected>Оберіть час</option>';
    let anyAvailable = false;

    for(const time of availableTimes) {
      const slot = `${selectedDate} ${time}`;
      const option = document.createElement('option');
      option.value = time;
      if(busySlots.includes(slot)) {
        option.disabled = true;
        option.textContent = `${time} (зайнято)`;
      } else {
        option.textContent = time;
        anyAvailable = true;
      }
      timeSelect.appendChild(option);
    }

    timeSelect.disabled = !anyAvailable;
    bookBtn.disabled = true;
    message.textContent = anyAvailable ? "" : "Вибрана дата повністю зайнята. Оберіть іншу дату.";
  }

  dateSelect.addEventListener('change', () => {
    populateTimes(dateSelect.value);
    bookBtn.disabled = true;
    message.textContent = "";
  });

  timeSelect.addEventListener('change', () => {
    bookBtn.disabled = !(dateSelect.value && timeSelect.value);
  });

  bookingForm.addEventListener('submit', (e) => {
    e.preventDefault();
    if(!dateSelect.value || !timeSelect.value) return;

    const bookingDateText = dateSelect.options[dateSelect.selectedIndex].textContent;
    const bookingTime = timeSelect.value;
    const slot = `${dateSelect.value} ${bookingTime}`;

    // Перевірка на зайнятість (на всяк випадок)
    if(busySlots.includes(slot)) {
      message.style.color = 'red';
      message.textContent = 'Цей час вже зайнятий. Оберіть інший.';
      return;
    }

    busySlots.push(slot);

    message.style.color = 'green';
    message.textContent = `Дякуємо! Ви записані на ${bookingDateText} о ${bookingTime}.`;

    // Оновлюємо часи, щоб заблокувати щойно зайнятий слот
    populateTimes(dateSelect.value);

    // Скидаємо вибір часу і кнопку
    timeSelect.value = "";
    bookBtn.disabled = true;
  });

  // Ініціалізація
  populateDates();
</script>

</body>
</html>

